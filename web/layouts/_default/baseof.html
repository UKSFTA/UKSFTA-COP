<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ .Title }} | {{ .Site.Title }}</title>
    
    <!-- Supabase Context -->
    <meta name="supabase-url" content="{{ .Site.Params.supabaseUrl }}">
    <meta name="supabase-service-role-key" content="{{ .Site.Params.supabaseServiceRoleKey }}">

    <!-- Leaflet.js -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    
    <!-- Leaflet Draw -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js"></script>

    {{ $style := resources.Get "css/main.css" | minify | fingerprint }}
    <link rel="stylesheet" href="{{ $style.RelPermalink }}">
</head>
<body>
    <div class="classification-banner top">{{ .Site.Params.classification }}</div>
    
    <header>
        <div class="logo-area">
            <a href="{{ .Site.BaseURL | relURL }}">
                <h1>{{ .Site.Title }}</h1>
            </a>
            <span class="service-name">{{ .Site.Params.serviceName }}</span>
        </div>
        <div class="unit-brand">{{ .Site.Params.unitName }}</div>
    </header>

    <main>
        {{ block "main" . }}{{ end }}
    </main>

    <footer>
        <div class="footer-content">
            <p>&copy; {{ now.Format "2006" }} {{ .Site.Params.unitName }}. Internal Use Only.</p>
            <p class="doctrine-ref">Standard: UKSFTA SOP-01 (Mapping & Intel)</p>
        </div>
    </footer>

    <div class="classification-banner bottom">{{ .Site.Params.classification }}</div>

    {{ $js := resources.Get "js/map.js" | minify | fingerprint }}
    <script src="{{ $js.RelPermalink }}"></script>
</body>
</html>
